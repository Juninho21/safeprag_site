import{j as e,h as s,U as t,i as a,F as r,k as l,l as n,m as o,r as i,n as c,o as d,e as m,p as u,f as x,O as h,q as p,s as g,t as b,E as f,X as j}from"./vendor-react-BhP3q8fg.js";import{B as y,b as N,r as v,S as w,c as C,a as S}from"./feature-activity-BHGN7l_9.js";const k="safeprag_clients",E="safeprag_client_code_counter",D=async e=>{const s=P(),t=(()=>{const e=localStorage.getItem(E)||"0",s=parseInt(e)+1;return localStorage.setItem(E,s.toString()),`C${s.toString().padStart(5,"0")}`})(),a={...e,id:Date.now().toString(),code:t,createdAt:new Date,updatedAt:new Date};return s.push(a),localStorage.setItem(k,JSON.stringify(s)),a},P=()=>{const e=localStorage.getItem(k);return e?JSON.parse(e):[]},R=({activeTab:o,onTabChange:i})=>e.jsxs("div",{className:"flex flex-wrap border-b overflow-x-auto",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm md:text-base md:px-4 md:py-2 "+("empresa"===o?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"),onClick:()=>i("empresa"),children:[e.jsx(s,{size:18,className:"min-w-[18px]"}),e.jsx("span",{className:"whitespace-nowrap",children:"Empresa"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm md:text-base md:px-4 md:py-2 "+("clientes"===o?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"),onClick:()=>i("clientes"),children:[e.jsx(t,{size:18,className:"min-w-[18px]"}),e.jsx("span",{className:"whitespace-nowrap",children:"Clientes"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm md:text-base md:px-4 md:py-2 "+("produtos"===o?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"),onClick:()=>i("produtos"),children:[e.jsx(a,{size:18,className:"min-w-[18px]"}),e.jsx("span",{className:"whitespace-nowrap",children:"Produtos"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm md:text-base md:px-4 md:py-2 "+("assinaturas"===o?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"),onClick:()=>i("assinaturas"),children:[e.jsx(r,{size:18,className:"min-w-[18px]"}),e.jsx("span",{className:"whitespace-nowrap",children:"Assinaturas"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm md:text-base md:px-4 md:py-2 "+("os-certificados"===o?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"),onClick:()=>i("os-certificados"),children:[e.jsx(l,{size:18,className:"min-w-[18px]"}),e.jsx("span",{className:"whitespace-nowrap",children:"OS e Certificados"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm md:text-base md:px-4 md:py-2 "+("backup"===o?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"),onClick:()=>i("backup"),children:[e.jsx(n,{size:18,className:"min-w-[18px]"}),e.jsx("span",{className:"whitespace-nowrap",children:"Backup e Manutenção"})]})]}),T=({isOpen:s,onRequestClose:t,children:a,className:r="modal-content",overlayClassName:l="modal-overlay"})=>e.jsx(o,{isOpen:s,onRequestClose:t,className:`${r} bg-white rounded-lg shadow-xl max-w-2xl mx-auto mt-20 outline-none`,overlayClassName:`${l} fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center`,ariaHideApp:!1,children:a}),O=()=>{const[s,t]=i.useState(!1),[a,r]=i.useState(""),[l,o]=i.useState(""),[g,b]=i.useState(!1),[f,j]=i.useState(0),[S,k]=i.useState(!1),[E,D]=i.useState(!1),[P,R]=i.useState(""),O=e=>{const s=e.target.files?.[0];if(s){const e=new FileReader;e.onload=e=>{try{const t=e.target?.result;JSON.parse(t),r(t),o(s.name)}catch(t){p.error("Arquivo inválido. Por favor, selecione um arquivo de backup JSON válido."),r(""),o("")}},e.readAsText(s)}},A=()=>{t(!1),r(""),o("")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4 max-w-lg mx-auto",children:[e.jsxs(y,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white h-12 sm:h-14 text-base sm:text-lg rounded-lg flex items-center justify-center gap-2",onClick:()=>{try{const e=N(),s=JSON.stringify(e),t=new Blob([s],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`backup_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),p.success("Backup realizado com sucesso!")}catch(e){p.error("Erro ao fazer backup")}},children:[e.jsx(c,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Fazer Backup"]}),e.jsxs(y,{className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white h-12 sm:h-14 text-base sm:text-lg rounded-lg flex items-center justify-center gap-2",onClick:()=>{t(!0)},children:[e.jsx(n,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Restaurar Backup"]}),e.jsxs(y,{className:"w-full bg-red-600 hover:bg-red-700 text-white h-12 sm:h-14 text-base sm:text-lg rounded-lg flex items-center justify-center gap-2",onClick:()=>k(!0),children:[e.jsx(d,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Limpar Sistema"]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 mt-2 text-center px-4",children:"Atenção: Esta ação irá limpar todos os dados do sistema. Faça um backup antes de prosseguir."})]}),e.jsx(T,{isOpen:s,onClose:A,title:"Restaurar Backup do Sistema",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(m,{className:"h-5 w-5 text-yellow-400 mr-2"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-yellow-700",children:"Atenção: Esta ação irá substituir todos os dados atuais do sistema. Certifique-se de que este é o backup correto antes de prosseguir."})})]})}),e.jsxs("div",{className:`flex flex-col items-center justify-center space-y-4 p-8 border-2 border-dashed rounded-lg transition-colors\n            ${l?"bg-blue-50 border-blue-300":"border-gray-300"}\n            hover:border-blue-500 cursor-pointer`,onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("border-blue-500")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("border-blue-500")},onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove("border-blue-500");const s=e.dataTransfer.files[0];s&&s.name.endsWith(".json")?O({target:{files:[s]}}):p.error("Por favor, selecione apenas arquivos .json")},children:[e.jsx(u,{className:"h-12 w-12 "+(l?"text-blue-500":"text-gray-400")}),e.jsxs("div",{className:"text-center",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-medium inline-block",children:l?"Trocar arquivo":"Selecionar arquivo .json"}),e.jsx("input",{type:"file",accept:".json",onChange:O,className:"hidden"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ou arraste e solte o arquivo aqui"})]})]}),l&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mt-2",children:[e.jsx(x,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:["Arquivo selecionado: ",l]})]}),g&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${f}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2 text-center",children:["Restaurando backup... ",f,"%"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-6",children:[e.jsx("button",{onClick:A,disabled:g,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{try{b(!0),j(0);const e=setInterval((()=>{j((s=>s>=90?(clearInterval(e),90):s+10))}),500),s=JSON.parse(a);await v(s),j(100),clearInterval(e),t(!1),r(""),o(""),p.success("Backup restaurado com sucesso!"),window.location.reload()}catch(e){p.error("Erro ao restaurar backup. Verifique se o arquivo é válido.")}finally{b(!1),j(0)}},disabled:!a||g,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Restaurando...":"Restaurar Backup"})]})]})}),e.jsx(T,{isOpen:S,onClose:()=>k(!1),title:"Limpar Sistema",children:e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(h,{className:"h-6 w-6 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Atenção! Ação Irreversível"}),e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsx("p",{children:"Esta ação irá:"}),e.jsxs("ul",{className:"list-disc ml-5 mt-2 space-y-1",children:[e.jsx("li",{children:"Apagar todos os dados do sistema"}),e.jsx("li",{children:"Remover todas as ordens de serviço"}),e.jsx("li",{children:"Excluir todos os registros de clientes"}),e.jsx("li",{children:"Limpar configurações personalizadas"})]})]})]})]})}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(m,{className:"h-6 w-6 text-yellow-400 mr-3"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Recomendamos fortemente que você faça um backup dos dados antes de prosseguir com esta ação."})]})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:'Para confirmar a limpeza do sistema, digite "LIMPAR" no campo abaixo:'}),e.jsx("input",{type:"text",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Digite LIMPAR",value:P,onChange:e=>R(e.target.value)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{onClick:()=>k(!1),disabled:E,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{try{D(!0);const e=[w.SERVICE_ORDERS,w.COMPANY,w.CLIENTS,w.PRODUCTS,"userData"];await C(),e.forEach((e=>{localStorage.removeItem(e)})),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach((function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")})),p.success("Sistema limpo com sucesso! A página será recarregada."),k(!1),setTimeout((()=>{window.location.href="/",window.location.reload()}),1500)}catch(e){p.error("Erro ao limpar sistema")}finally{D(!1)}},disabled:"LIMPAR"!==P||E,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:E?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Limpando..."]}):"Confirmar Limpeza"})]})]})})]})},A={code:"",branch:"",name:"",document:"",address:"",contact:"",phone:"",email:"",city:"",state:"",zipCode:"",notes:""},I=()=>{const[s,t]=i.useState(A),[a,r]=i.useState(!1),[l,n]=i.useState([]),[o,c]=i.useState(null),[m,u]=i.useState(!1),x=()=>{const e=P();n(e)};i.useEffect((()=>{x()}),[]);const h=async()=>{try{if(!y())return;let e;if(m&&s.id)e=await(async e=>{const s=P(),t=s.findIndex((s=>s.id===e.id));if(-1===t)throw new Error("Cliente não encontrado");const a={...e,code:s[t].code,updatedAt:new Date};return s[t]=a,localStorage.setItem(k,JSON.stringify(s)),a})(s);else{const{code:t,...a}=s;e=await D(a)}x(),p.success(m?"Cliente atualizado com sucesso!":"Cliente cadastrado com sucesso!"),t(A),u(!1)}catch(e){p.error("Erro ao salvar cliente")}},b=async e=>{try{await(async e=>{const s=P(),t=s.filter((s=>s.id!==e));return t.length!==s.length&&(localStorage.setItem(k,JSON.stringify(t)),!0)})(e),x(),p.success("Cliente excluído com sucesso!")}catch(s){p.error("Erro ao excluir cliente")}},f=e=>{t(e),u(!0),window.scrollTo({top:0,behavior:"smooth"})},j=e=>{const{name:s,value:a}=e.target;t((e=>({...e,[s]:a})))},y=()=>s.branch.trim()?s.name.trim()?s.document.trim()?s.address.trim()?!!s.contact.trim()||(p.error("Contato é obrigatório"),!1):(p.error("Endereço é obrigatório"),!1):(p.error("CNPJ/CPF é obrigatório"),!1):(p.error("Nome Fantasia é obrigatório"),!1):(p.error("Razão Social é obrigatória"),!1);return e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cadastro de Cliente"})}),o&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:o}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),y())try{r(!0),c(null),await h(),x()}catch(s){c("Erro ao salvar cliente. Por favor, tente novamente."),p.error("Erro ao salvar cliente.")}finally{r(!1)}},className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:m?"Editar Cliente":"Novo Cliente"}),m&&e.jsx("button",{type:"button",onClick:()=>{t(A),u(!1)},className:"text-sm text-gray-600 hover:text-gray-800",children:"Cancelar Edição"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Razão Social"}),e.jsx("input",{type:"text",name:"branch",value:s.branch,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome Fantasia"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CNPJ/CPF"}),e.jsx("input",{type:"text",name:"document",value:s.document,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Endereço"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cidade"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),e.jsx("input",{type:"text",name:"state",value:s.state,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CEP"}),e.jsx("input",{type:"text",name:"zipCode",value:s.zipCode,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contato"}),e.jsx("input",{type:"text",name:"contact",value:s.contact,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),e.jsx("input",{type:"text",name:"phone",value:s.phone,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"E-mail"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),e.jsx("textarea",{name:"notes",value:s.notes,onChange:j,rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:a?"Salvando...":m?"Atualizar":"Salvar"})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Clientes Cadastrados"}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full align-middle",children:e.jsx("div",{className:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 md:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Código"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Razão Social"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Nome Fantasia"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"CNPJ/CPF"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Contato"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Telefone"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:l.map((s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-blue-600 bg-blue-50 sm:pl-6",children:s.code||"N/A"}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:s.branch}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:s.name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:s.document}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:s.contact}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:s.phone}),e.jsx("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>f(s),className:"text-blue-600 hover:text-blue-800",title:"Editar cliente",children:e.jsx(g,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>b(s.id),className:"text-red-600 hover:text-red-800",title:"Excluir cliente",children:e.jsx(d,{className:"h-5 w-5"})})]})})]},s.id)))})]})})})}),e.jsx("div",{className:"md:hidden space-y-4",children:l.map((s=>e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md",children:["Código: ",s.code]})}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Razão Social:"})," ",s.branch]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nome Fantasia:"})," ",s.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"CNPJ/CPF:"})," ",s.document]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>f(s),className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50",title:"Editar cliente",children:e.jsx(g,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>b(s.id),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50",title:"Excluir cliente",children:e.jsx(d,{className:"h-5 w-5"})})]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Endereço"}),e.jsx("div",{className:"text-sm text-gray-900",children:s.address})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Cidade/Estado"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[s.city," - ",s.state]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"CEP"}),e.jsx("div",{className:"text-sm text-gray-900",children:s.zipCode})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Contato"}),e.jsx("div",{className:"text-sm text-gray-900",children:s.contact})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Telefone"}),e.jsx("div",{className:"text-sm text-gray-900",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"E-mail"}),e.jsx("div",{className:"text-sm text-gray-900",children:s.email})]})]}),s.notes&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Observações"}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:s.notes})]})]})]},s.id)))})]})]})},L="safeprag_products",F=()=>{const[s,t]=i.useState((()=>{const e=localStorage.getItem(L);return e?JSON.parse(e):[]})),[a,r]=i.useState({id:"",name:"",description:"",manufacturer:"",registrationNumber:"",activeIngredient:"",chemicalGroup:"",registration:"",batch:"",expirationDate:"",unit:"",measure:"ml",diluent:"",concentration:"",applicationMethod:""}),[l,n]=i.useState(!1),o=e=>{const{name:s,value:t}=e.target;r((e=>({...e,[s]:t})))};return e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:l?"Editar Produto":"Cadastro de Produtos"}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),l){const e=s.map((e=>e.id===a.id?a:e));t(e),localStorage.setItem(L,JSON.stringify(e)),p.success("Produto atualizado com sucesso!")}else{const e={...a,id:Date.now().toString()},r=[...s,e];t(r),localStorage.setItem(L,JSON.stringify(r)),p.success("Produto cadastrado com sucesso!")}r({id:"",name:"",description:"",manufacturer:"",registrationNumber:"",activeIngredient:"",chemicalGroup:"",registration:"",batch:"",expirationDate:"",unit:"",measure:"ml",diluent:"",concentration:"",applicationMethod:""}),n(!1)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nome do produto/concentração"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"activeIngredient",className:"block text-sm font-medium text-gray-700",children:"Princípio ativo"}),e.jsx("input",{type:"text",id:"activeIngredient",name:"activeIngredient",value:a.activeIngredient,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"chemicalGroup",className:"block text-sm font-medium text-gray-700",children:"Grupo químico"}),e.jsx("input",{type:"text",id:"chemicalGroup",name:"chemicalGroup",value:a.chemicalGroup,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"registration",className:"block text-sm font-medium text-gray-700",children:"Registro"}),e.jsx("input",{type:"text",id:"registration",name:"registration",value:a.registration,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"batch",className:"block text-sm font-medium text-gray-700",children:"Lote"}),e.jsx("input",{type:"text",id:"batch",name:"batch",value:a.batch,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expirationDate",className:"block text-sm font-medium text-gray-700",children:"Validade"}),e.jsx("input",{type:"date",id:"expirationDate",name:"expirationDate",value:a.expirationDate,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium text-gray-700",children:"Unidade"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("input",{type:"text",id:"unit",name:"unit",value:a.unit,onChange:o,placeholder:"Ex: 1L, 500ml, 250g",className:"flex-1 rounded-l-md border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),e.jsxs("select",{name:"measure",value:a.measure,onChange:o,className:"rounded-r-md border-l-0 border-gray-300 bg-gray-50 px-3 text-gray-500 focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"ml",children:"ml"}),e.jsx("option",{value:"g",children:"g"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"diluent",className:"block text-sm font-medium text-gray-700",children:"Diluente"}),e.jsx("input",{type:"text",id:"diluent",name:"diluent",value:a.diluent,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:l?"Atualizar Produto":"Cadastrar Produto"})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Produtos Cadastrados"}),e.jsxs("div",{className:"space-y-4",children:[s.map((a=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>(r(a),void n(!0)),className:"text-blue-600 hover:text-blue-800",title:"Editar",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>(e=>{if(window.confirm("Tem certeza que deseja excluir este produto?")){const a=s.filter((s=>s.id!==e));t(a),localStorage.setItem(L,JSON.stringify(a)),p.success("Produto excluído com sucesso!")}})(a.id),className:"text-red-600 hover:text-red-800",title:"Excluir",children:e.jsx(d,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Princípio ativo:"})," ",a.activeIngredient]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Grupo químico:"})," ",a.chemicalGroup]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Registro:"})," ",a.registration]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Lote:"})," ",a.batch]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Validade:"})," ",new Date(a.expirationDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Unidade:"})," ",a.unit," ",a.measure]})]})]},a.id))),0===s.length&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum produto cadastrado ainda."})]})]})]})})},q=({onFileSelect:s,currentImageUrl:t,className:a=""})=>{const[r,l]=i.useState(""),n=i.useRef(null);i.useEffect((()=>{t&&l(t)}),[t]);const o=()=>{n.current?.click()};return e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-4 text-center cursor-pointer hover:border-blue-500 transition-colors ${a}`,children:[e.jsx("input",{type:"file",ref:n,onChange:e=>{const t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/"))return void alert("Por favor, selecione apenas arquivos de imagem.");if(t.size>2097152)return void alert("O arquivo é muito grande. O tamanho máximo permitido é 2MB.");const e=new FileReader;e.onloadend=()=>{l(e.result)},e.readAsDataURL(t),s(t)}},accept:"image/*",className:"hidden"}),r?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:"Preview",className:"max-h-32 mx-auto object-contain"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity",onClick:o,children:e.jsx(u,{className:"w-6 h-6 text-white"})})]}):e.jsxs("div",{onClick:o,className:"flex flex-col items-center justify-center py-4",children:[e.jsx(u,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Clique para fazer upload do logo"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG até 2MB"})]})]})},z="safeprag_company",J=()=>{const e=localStorage.getItem(z);return e?JSON.parse(e):null},M=e=>{localStorage.setItem(z,JSON.stringify(e))},U=w.COMPANY,B={name:"",cnpj:"",phone:"",address:"",email:"",logoUrl:"",environmentalLicense:{number:"",date:""},sanitaryPermit:{number:"",expiryDate:""}},V=()=>{const[s,t]=i.useState("empresa");i.useState(!1);const[a,r]=i.useState(!1),[l,n]=i.useState(null),[o,c]=i.useState(!1),[m,u]=i.useState((()=>{const e=localStorage.getItem(U);return e?JSON.parse(e):B})),[x,h]=i.useState((()=>{const e=localStorage.getItem("userData");return e?JSON.parse(e):{name:"",phone:"",email:"",signatureType:"controlador",tecnicoName:"",tecnicoCrea:"",tecnicoPhone:"",tecnicoEmail:"",signature:void 0,tecnicoSignature:void 0}})),g=i.useRef(null),y=i.useRef(null),[N,v]=i.useState(!1),[C,k]=i.useState(!1),[E,D]=i.useState(0),[P,A]=i.useState(0),[L,z]=i.useState(0),[V,G]=i.useState(0);i.useEffect((()=>{(()=>{const e=J();e&&u(e)})()}),[]),i.useEffect((()=>{"userData"===s&&h((e=>({...e,signatureType:"controlador"})))}),[s]),i.useEffect((()=>{if("userData"===s){const e=localStorage.getItem("userData");if(e){const s=JSON.parse(e);h((e=>({...e,...s,signatureType:e.signatureType})))}}}),[s]);const Y=async()=>{try{M(m),localStorage.setItem(U,JSON.stringify(m)),p.success("Dados da empresa salvos com sucesso!"),c(!0)}catch(e){p.error("Erro ao salvar dados da empresa")}},_=e=>{const{name:s,value:t}=e.target;if(s.includes(".")){const[e,a]=s.split(".");u((s=>({...s,[e]:{...s[e],[a]:t}})))}else u((e=>({...e,[s]:t})))},X=e=>{const s=g.current;if(!s)return;const t=s.getBoundingClientRect(),a=s.width/t.width,r=s.height/t.height;let l,n;if("touches"in e){e.preventDefault();const s=e.touches[0];l=(s.clientX-t.left)*a,n=(s.clientY-t.top)*r}else l=(e.clientX-t.left)*a,n=(e.clientY-t.top)*r;v(!0),D(l),A(n)},W=e=>{if(!N||!g.current)return;const s=g.current,t=s.getContext("2d");if(!t)return;const a=s.getBoundingClientRect(),r=s.width/a.width,l=s.height/a.height;let n,o;if("touches"in e){e.preventDefault();const s=e.touches[0];n=(s.clientX-a.left)*r,o=(s.clientY-a.top)*l}else n=(e.clientX-a.left)*r,o=(e.clientY-a.top)*l;t.beginPath(),t.moveTo(E,P),t.lineTo(n,o),t.strokeStyle="#000",t.lineWidth=2,t.lineCap="round",t.stroke(),D(n),A(o)},$=e=>{const s=y.current;if(!s)return;const t=s.getBoundingClientRect(),a=s.width/t.width,r=s.height/t.height;let l,n;if("touches"in e){e.preventDefault();const s=e.touches[0];l=(s.clientX-t.left)*a,n=(s.clientY-t.top)*r}else l=(e.clientX-t.left)*a,n=(e.clientY-t.top)*r;k(!0),z(l),G(n)},H=e=>{if(!C||!y.current)return;const s=y.current,t=s.getContext("2d");if(!t)return;const a=s.getBoundingClientRect(),r=s.width/a.width,l=s.height/a.height;let n,o;if("touches"in e){e.preventDefault();const s=e.touches[0];n=(s.clientX-a.left)*r,o=(s.clientY-a.top)*l}else n=(e.clientX-a.left)*r,o=(e.clientY-a.top)*l;t.beginPath(),t.moveTo(L,V),t.lineTo(n,o),t.strokeStyle="#000",t.lineWidth=2,t.lineCap="round",t.stroke(),z(n),G(o)},K=()=>{if(N&&g.current){v(!1);const e=g.current.toDataURL();h((s=>({...s,signature:e})))}},Q=()=>{if(C&&y.current){k(!1);const e=y.current.toDataURL();h((s=>({...s,tecnicoSignature:e})))}};return e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:"Administração do Sistema"}),e.jsx(R,{activeTab:s,onTabChange:t}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:["empresa"===s&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-3 sm:p-6",children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),m.name&&m.cnpj&&m.phone&&m.address&&m.email?Y():p.error("Por favor, preencha todos os campos obrigatórios")},className:"space-y-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx(q,{onFileSelect:async e=>{n(e);try{const s=new FileReader;s.onload=e=>{const s=e.target?.result;u((e=>({...e,logoUrl:s})))},s.readAsDataURL(e)}catch(s){p.error("Erro ao processar imagem")}},currentImageUrl:m.logoUrl})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Empresa"}),e.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cnpj",className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ"}),e.jsx("input",{type:"text",id:"cnpj",name:"cnpj",value:m.cnpj,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:m.email,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereço"}),e.jsx("input",{type:"text",id:"address",name:"address",value:m.address,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"col-span-2 mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-3",children:"Licença Ambiental"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"environmentalLicenseNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Número da Licença"}),e.jsx("input",{type:"text",id:"environmentalLicenseNumber",name:"environmentalLicense.number",value:m.environmentalLicense.number,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"environmentalLicenseDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Licença"}),e.jsx("input",{type:"date",id:"environmentalLicenseDate",name:"environmentalLicense.date",value:m.environmentalLicense.date,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"col-span-2 mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-3",children:"Alvará Sanitário"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sanitaryPermitNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Número do Alvará"}),e.jsx("input",{type:"text",id:"sanitaryPermitNumber",name:"sanitaryPermit.number",value:m.sanitaryPermit.number,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sanitaryPermitExpiryDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Validade"}),e.jsx("input",{type:"date",id:"sanitaryPermitExpiryDate",name:"sanitaryPermit.expiryDate",value:m.sanitaryPermit.expiryDate,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[o&&e.jsxs("button",{type:"button",onClick:()=>{window.confirm("Tem certeza que deseja excluir os dados da empresa?")&&(localStorage.removeItem(U),u(B),n(null),c(!1),p.success("Dados da empresa excluídos com sucesso!"))},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 flex items-center",children:[e.jsx(d,{className:"w-4 h-4 mr-1.5"}),"Excluir"]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Salvar"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dados da Empresa"}),e.jsx("button",{onClick:()=>c(!o),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-700",children:o?"Ocultar Dados":"Visualizar Dados"})]}),o?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.logoUrl&&e.jsxs("div",{className:"col-span-full",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Logo da Empresa"}),e.jsx("img",{src:m.logoUrl,alt:"Logo da empresa",className:"max-h-32 object-contain"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Nome da Empresa"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:m.name||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"CNPJ"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:m.cnpj||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Telefone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:m.phone||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:m.email||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Endereço"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:m.address||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Licença Ambiental"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["Número: ",m.environmentalLicense?.number||"Não informado",e.jsx("br",{}),"Data: ",m.environmentalLicense?.date||"Não informada"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Alvará Sanitário"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["Número: ",m.sanitaryPermit?.number||"Não informado",e.jsx("br",{}),"Validade: ",m.sanitaryPermit?.expiryDate||"Não informada"]})]})]}):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'Clique em "Visualizar Dados" para ver as informações da empresa'})]})]}),"clientes"===s&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-3 sm:p-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Clientes"}),e.jsx(I,{})]}),"produtos"===s&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-3 sm:p-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Produtos"}),e.jsx(F,{})]}),"assinaturas"===s&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-3 sm:p-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Assinaturas"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assinaturas"}),e.jsxs("button",{type:"button",onClick:()=>r(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Visualizar Dados"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Assinatura"}),e.jsxs("select",{value:x.signatureType,onChange:e=>{var s;s=e.target.value,h((e=>({...e,signatureType:s})))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"controlador",children:"Controlador de pragas"}),e.jsx("option",{value:"tecnico",children:"Responsável técnico"})]})]}),"controlador"===x.signatureType&&e.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={...x,name:x.name,phone:x.phone,email:x.email,signatureType:"controlador",signature:x.signature};localStorage.setItem("userData",JSON.stringify(s));try{const e=localStorage.getItem(w.SERVICE_ORDERS);if(e){const s=JSON.parse(e).map((e=>({...e,controladorName:x.name})));localStorage.setItem(w.SERVICE_ORDERS,JSON.stringify(s))}}catch(t){}r(!1),c(!0),window.dispatchEvent(new Event("serviceOrdersUpdated"))},className:"border border-gray-200 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dados do Controlador de Pragas"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:x.name,onChange:e=>h((s=>({...s,name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",value:x.phone,onChange:e=>h((s=>({...s,phone:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:x.email,onChange:e=>h((s=>({...s,email:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assinatura Manual"}),e.jsxs("div",{className:"border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[e.jsx(b,{className:"inline-block w-4 h-4 mr-1"}),"Desenhe sua assinatura abaixo"]}),e.jsx("button",{type:"button",onClick:()=>{if(g.current){const e=g.current.getContext("2d");e&&(e.clearRect(0,0,g.current.width,g.current.height),h((e=>({...e,signature:void 0}))))}},className:"text-sm text-red-600 hover:text-red-700",children:"Limpar"})]}),e.jsx("canvas",{ref:g,width:400,height:200,onMouseDown:X,onMouseMove:W,onMouseUp:K,onMouseOut:K,onTouchStart:X,onTouchMove:W,onTouchEnd:K,className:"border border-gray-200 rounded w-full bg-white cursor-crosshair",style:{touchAction:"none"}})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Salvar Dados do Controlador"})})]}),"tecnico"===x.signatureType&&e.jsxs("form",{onSubmit:e=>{e.preventDefault();const s=localStorage.getItem("userData"),t=s?JSON.parse(s):{},a={...t,tecnicoName:x.tecnicoName,tecnicoCrea:x.tecnicoCrea,tecnicoPhone:x.tecnicoPhone,tecnicoEmail:x.tecnicoEmail,signatureType:x.signatureType,name:t.name||x.name,phone:t.phone||x.phone,email:t.email||x.email,tecnicoSignature:x.tecnicoSignature};localStorage.setItem("userData",JSON.stringify(a)),h(a),p.success("Dados do Responsável Técnico salvos com sucesso!")},className:"border border-gray-200 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dados do Responsável Técnico"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:x.tecnicoName,onChange:e=>h((s=>({...s,tecnicoName:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CREA"}),e.jsx("input",{type:"text",value:x.tecnicoCrea,onChange:e=>h((s=>({...s,tecnicoCrea:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",value:x.tecnicoPhone,onChange:e=>h((s=>({...s,tecnicoPhone:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:x.tecnicoEmail,onChange:e=>h((s=>({...s,tecnicoEmail:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assinatura Manual"}),e.jsxs("div",{className:"border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[e.jsx(b,{className:"inline-block w-4 h-4 mr-1"}),"Desenhe sua assinatura abaixo"]}),e.jsx("button",{type:"button",onClick:()=>{if(y.current){const e=y.current.getContext("2d");e&&(e.clearRect(0,0,y.current.width,y.current.height),h((e=>({...e,tecnicoSignature:void 0}))))}},className:"text-sm text-red-600 hover:text-red-700",children:"Limpar"})]}),e.jsx("canvas",{ref:y,width:400,height:200,onMouseDown:$,onMouseMove:H,onMouseUp:Q,onMouseOut:Q,onTouchStart:$,onTouchMove:H,onTouchEnd:Q,className:"border border-gray-200 rounded w-full bg-white cursor-crosshair",style:{touchAction:"none"}})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Salvar Dados do Técnico"})})]})]})]}),(()=>{const s="controlador"===x.signatureType,t=s?"Dados do Controlador de Pragas":"Dados do Responsável Técnico";return e.jsx(T,{isOpen:a,onRequestClose:()=>r(!1),className:"modal-content",overlayClassName:"modal-overlay",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:t}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(j,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"space-y-4",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nome:"}),e.jsx("p",{children:x.name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Telefone:"}),e.jsx("p",{children:x.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email:"}),e.jsx("p",{children:x.email||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Assinatura:"}),x.signature?e.jsx("img",{src:x.signature,alt:"Assinatura do Controlador",className:"border border-gray-200 rounded mt-1",style:{maxWidth:"400px",background:"white"}}):e.jsx("p",{children:"Nenhuma assinatura cadastrada"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nome:"}),e.jsx("p",{children:x.tecnicoName||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"CREA:"}),e.jsx("p",{children:x.tecnicoCrea||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Telefone:"}),e.jsx("p",{children:x.tecnicoPhone||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email:"}),e.jsx("p",{children:x.tecnicoEmail||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Assinatura:"}),x.tecnicoSignature?e.jsx("img",{src:x.tecnicoSignature,alt:"Assinatura do Técnico",className:"border border-gray-200 rounded mt-1",style:{maxWidth:"400px",background:"white"}}):e.jsx("p",{children:"Nenhuma assinatura cadastrada"})]})]})})]})})})()]})]}),"os-certificados"===s&&e.jsx("div",{className:"bg-white shadow rounded-lg p-3 sm:p-6",children:e.jsx(S,{})}),"backup"===s&&e.jsx("div",{className:"bg-white shadow rounded-lg p-3 sm:p-6",children:e.jsx(O,{})})]})]})};export{V as A,P as g};
